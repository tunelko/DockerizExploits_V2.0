# Description 
An automatic builted enviroment to run isolated CTF exploit levels with Docker. 

# Features
You can define whatever on your Dockerfile. Keep in mind that exploit VM is designed to run five levels (level1, level2, ...) but you can configure as many as you want, just be sure you add them on shell scripts and they are present.

* Game levels are designed by increasing difficult and escalating level's privileges so flags are always ssh level's password. 
* It runs with `--security-opt=seccomp:unconfined` (gdb needs a lot of syscalls, see syscalls.txt) but you can include your syscalls on a separate json file. 
* Customizable exploit levels, just put inside /sources/levelXYZ.c, where XYZ is the level's number. Compile and copy binaries to bin/levels
* gdb-peda debugger integration
* Custom motd with pretty ascii banner (see above's image) 

# How to Install 

**Note: be sure you have installed docker on your host.** [This guide could be useful](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-getting-started)

1. `git clone https://github.com/tunelko/DockerizExploits_V2.0.git && cd DockerizExploits_V2.0`
2. `chmod +x *sh && ./docker_start.sh`

# Files description and customization 

* **docker_start.sh** : builds and runs on docker. Init script. 
* **docker_clean.sh** : stops and deletes docker instance
* **docker_restart.sh** : clean, build and run instances. 
* [**perms.sh**](https://github.com/tunelko/DockerizExploits_V2.0/blob/master/perms.sh) : some binary access prevention and level's customizacion
* **gdbpeda.sh** : peda python script on all users for better debugging purposes
* **generate_ssh_passwords.sh** : not used. Purpose is generates SSH passwords dinamically. 
* **limits.conf** : Set limits on user process. Important to avoid local DoS forking. 

About [**limits.conf**](https://github.com/tunelko/DockerizExploits_V2.0/blob/b6994f3351a3e8a5eef74511341fcfeafc00b83f/limits.conf), see on [**Dockerfile**](https://github.com/tunelko/DockerizExploits_V2.0/blob/b6994f3351a3e8a5eef74511341fcfeafc00b83f/Dockerfile) that is just added to `/etc/security` :
```
# limits nproc per level's user  
21	ADD limits.conf /etc/security/limits.conf 
```
And you can set per-level your custom value: 
```
level1			 hard 	 nproc			 20
level2			 hard 	 nproc			 20
level3			 hard 	 nproc			 20
```

# Playing 
Connect via ``ssh level1@host -p1337`` with: 
```
username: level1 
password: level1 
``` 

# Cleaning and stopping all
Just run `./docker_clean.sh`, it removes the containers. If you want to restart, use `./docker_restart.sh`.

# Considerations 

As you can notice on Dockerfile, root guest machine's password is created at line: 
```
RUN echo 'root:YOUR_ROOT_PASSWORD_HERE' | chpasswd
``` 
It's a must you **change this line with your own password**. 

# Login and motd preview 
![alt tag](http://tunelko.com/dockerizeexploits.png)

# Install video 
[![asciicast](https://asciinema.org/a/6lam2u7eccoss1i214f24xgay.png)](https://asciinema.org/a/6lam2u7eccoss1i214f24xgay)

# Disclaimer 
By cloning this repo, you are absolutely responsible about what you are doing with vulnerable and insecure software included on this repo. This is just for fun and ctfs, don't mess around. 


